var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};function n(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function r(t,n,r,e){return new(r||(r=Promise))(function(o,i){function u(t){try{s(e.next(t))}catch(n){i(n)}}function c(t){try{s(e.throw(t))}catch(n){i(n)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof r?n:new r(function(t){t(n)})).then(u,c)}s((e=e.apply(t,n||[])).next())})}function e(t,n){var r,e,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=c(0),u.throw=c(1),u.return=c(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(i=0)),i;)try{if(r=1,e&&(o=2&c[0]?e.return:c[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,c[1])).done)return o;switch(e=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,e=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(t,i)}catch(s){c=[6,s],e=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}function o(t){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,n){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var e,o,i=r.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(e=i.next()).done;)u.push(e.value)}catch(c){o={error:c}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u}function u(t,n,r){if(r||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))}function c(t){return this instanceof c?(this.v=t,this):new c(t)}function s(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,o=r.apply(t,n||[]),i=[];return e=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",function(t){return function(n){return Promise.resolve(n).then(t,a)}}),e[Symbol.asyncIterator]=function(){return this},e;function u(t,n){o[t]&&(e[t]=function(n){return new Promise(function(r,e){i.push([t,n,r,e])>1||s(t,n)})},n&&(e[t]=n(e[t])))}function s(t,n){try{(r=o[t](n)).value instanceof c?Promise.resolve(r.value.v).then(l,a):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function l(t){s("next",t)}function a(t){s("throw",t)}function f(t,n){t(n),i.shift(),i.length&&s(i[0][0],i[0][1])}}function l(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=t[Symbol.asyncIterator];return r?r.call(t):(t=o(t),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n);function e(r){n[r]=t[r]&&function(n){return new Promise(function(e,o){(function(t,n,r,e){Promise.resolve(e).then(function(n){t({value:n,done:r})},n)})(e,o,(n=t[r](n)).done,n.value)})}}}function a(t){return"function"==typeof t}function f(t){var n=t(function(t){Error.call(t),t.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}"function"==typeof SuppressedError&&SuppressedError;var h=f(function(t){return function(n){t(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}});function p(t,n){if(t){var r=t.indexOf(n);0<=r&&t.splice(r,1)}}var d=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var n;return t.prototype.unsubscribe=function(){var t,n,r,e,c;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=o(s),f=l.next();!f.done;f=l.next()){f.value.remove(this)}}catch(m){t={error:m}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else s.remove(this);var p=this.initialTeardown;if(a(p))try{p()}catch(_){c=_ instanceof h?_.errors:[_]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var v=o(d),y=v.next();!y.done;y=v.next()){var w=y.value;try{b(w)}catch(x){c=null!=c?c:[],x instanceof h?c=u(u([],i(c)),i(x.errors)):c.push(x)}}}catch(g){r={error:g}}finally{try{y&&!y.done&&(e=v.return)&&e.call(v)}finally{if(r)throw r.error}}}if(c)throw new h(c)}},t.prototype.add=function(n){var r;if(n&&n!==this)if(this.closed)b(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(n)}},t.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},t.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},t.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&p(n,t)},t.prototype.remove=function(n){var r=this._finalizers;r&&p(r,n),n instanceof t&&n._removeParent(this)},t.EMPTY=((n=new t).closed=!0,n),t}(),v=d.EMPTY;function y(t){return t instanceof d||t&&"closed"in t&&a(t.remove)&&a(t.add)&&a(t.unsubscribe)}function b(t){a(t)?t():t.unsubscribe()}var w=void 0,m=function(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return setTimeout.apply(void 0,u([t,n],i(r)))};function _(t){m(function(){throw t})}function x(){}function g(t){t()}var S=function(t){function r(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,y(n)&&n.add(r)):r.destination=A,r}return n(r,t),r.create=function(t,n,r){return new I(t,n,r)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(d),E=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){O(r)}},t.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){O(r)}else O(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){O(n)}},t}(),I=function(t){function r(n,r,e){var o,i=t.call(this)||this;return o=a(n)||!n?{next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=e?e:void 0}:n,i.destination=new E(o),i}return n(r,t),r}(S);function O(t){_(t)}var A={closed:!0,next:x,error:function(t){throw t},complete:x},P="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(t){return t}var k=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(t,n,r){var e,o=this,i=(e=t)&&e instanceof S||function(t){return t&&a(t.next)&&a(t.error)&&a(t.complete)}(e)&&y(e)?t:new I(t,n,r);return g(function(){var t=o,n=t.operator,r=t.source;i.add(n?n.call(i,r):r?o._subscribe(i):o._trySubscribe(i))}),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},t.prototype.forEach=function(t,n){var r=this;return new(n=T(n))(function(n,e){var o=new I({next:function(n){try{t(n)}catch(r){e(r),o.unsubscribe()}},error:e,complete:n});r.subscribe(o)})},t.prototype._subscribe=function(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)},t.prototype[P]=function(){return this},t.prototype.pipe=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0===(t=n).length?j:1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)})(this)},t.prototype.toPromise=function(t){var n=this;return new(t=T(t))(function(t,r){var e;n.subscribe(function(t){return e=t},function(t){return r(t)},function(){return t(e)})})},t.create=function(n){return new t(n)},t}();function T(t){var n;return null!==(n=null!=t?t:w)&&void 0!==n?n:Promise}function z(t){return function(n){if(function(t){return a(null==t?void 0:t.lift)}(n))return n.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function C(t,n,r,e,o){return new U(t,n,r,e,o)}var U=function(t){function r(n,r,e,o,i,u){var c=t.call(this,n)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=r?function(t){try{r(t)}catch(e){n.error(e)}}:t.prototype._next,c._error=o?function(t){try{o(t)}catch(r){n.error(r)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=e?function(){try{e()}catch(t){n.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,c}return n(r,t),r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}},r}(S),Y=f(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),q=function(t){function r(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return n(r,t),r.prototype.lift=function(t){var n=new F(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new Y},r.prototype.next=function(t){var n=this;g(function(){var r,e;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var i=o(n.currentObservers),u=i.next();!u.done;u=i.next()){u.value.next(t)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}}})},r.prototype.error=function(t){var n=this;g(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var r=n.observers;r.length;)r.shift().error(t)}})},r.prototype.complete=function(){var t=this;g(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,r=this,e=r.hasError,o=r.isStopped,i=r.observers;return e||o?v:(this.currentObservers=null,i.push(t),new d(function(){n.currentObservers=null,p(i,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,r=n.hasError,e=n.thrownError,o=n.isStopped;r?t.error(e):o&&t.complete()},r.prototype.asObservable=function(){var t=new k;return t.source=this,t},r.create=function(t,n){return new F(t,n)},r}(k),F=function(t){function r(n,r){var e=t.call(this)||this;return e.destination=n,e.source=r,e}return n(r,t),r.prototype.next=function(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)},r.prototype.error=function(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)},r.prototype.complete=function(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)},r.prototype._subscribe=function(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:v},r}(q),D=function(){return Date.now()},R=function(t){function r(n,r){return t.call(this)||this}return n(r,t),r.prototype.schedule=function(t,n){return this},r}(d),$=function(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return setInterval.apply(void 0,u([t,n],i(r)))},M=function(t){return clearInterval(t)},G=function(t){function r(n,r){var e=t.call(this,n,r)||this;return e.scheduler=n,e.work=r,e.pending=!1,e}return n(r,t),r.prototype.schedule=function(t,n){var r;if(void 0===n&&(n=0),this.closed)return this;this.state=t;var e=this.id,o=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(o,e,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this},r.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),$(t.flush.bind(t,this),r)},r.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&M(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var r,e=!1;try{this.work(t)}catch(o){e=!0,r=o||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,r=this.scheduler,e=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(e,this),null!=n&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},r}(R),L=function(){function t(n,r){void 0===r&&(r=t.now),this.schedulerActionCtor=n,this.now=r}return t.prototype.schedule=function(t,n,r){return void 0===n&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},t.now=D,t}(),B=function(t){function r(n,r){void 0===r&&(r=L.now);var e=t.call(this,n,r)||this;return e.actions=[],e._active=!1,e}return n(r,t),r.prototype.flush=function(t){var n=this.actions;if(this._active)n.push(t);else{var r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}},r}(L),H=new B(G),J=function(t){function r(n,r){var e=t.call(this,n,r)||this;return e.scheduler=n,e.work=r,e}return n(r,t),r.prototype.schedule=function(n,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},r.prototype.execute=function(n,r){return r>0||this.closed?t.prototype.execute.call(this,n,r):this._execute(n,r)},r.prototype.requestAsyncId=function(n,r,e){return void 0===e&&(e=0),null!=e&&e>0||null==e&&this.delay>0?t.prototype.requestAsyncId.call(this,n,r,e):(n.flush(this),0)},r}(G),K=new(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r}(B))(J),N=new k(function(t){return t.complete()});function Q(t){return t[t.length-1]}function V(t){return(n=Q(t))&&a(n.schedule)?t.pop():void 0;var n}var W=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function X(t){return a(null==t?void 0:t.then)}function Z(t){return a(t[P])}function tt(t){return Symbol.asyncIterator&&a(null==t?void 0:t[Symbol.asyncIterator])}function nt(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var rt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function et(t){return a(null==t?void 0:t[rt])}function ot(t){return s(this,arguments,function(){var n,r,o;return e(this,function(e){switch(e.label){case 0:n=t.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,c(n.read())];case 3:return r=e.sent(),o=r.value,r.done?[4,c(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,c(o)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function it(t){return a(null==t?void 0:t.getReader)}function ut(t){if(t instanceof k)return t;if(null!=t){if(Z(t))return i=t,new k(function(t){var n=i[P]();if(a(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(W(t))return e=t,new k(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(X(t))return r=t,new k(function(t){r.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,_)});if(tt(t))return ct(t);if(et(t))return n=t,new k(function(t){var r,e;try{for(var i=o(n),u=i.next();!u.done;u=i.next()){var c=u.value;if(t.next(c),t.closed)return}}catch(s){r={error:s}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}t.complete()});if(it(t))return ct(ot(t))}var n,r,e,i;throw nt(t)}function ct(t){return new k(function(n){(function(t,n){var o,i,u,c;return r(this,void 0,void 0,function(){var r,s;return e(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),o=l(t),e.label=1;case 1:return[4,o.next()];case 2:if((i=e.sent()).done)return[3,4];if(r=i.value,n.next(r),n.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=e.sent(),u={error:s},[3,11];case 6:return e.trys.push([6,,9,10]),i&&!i.done&&(c=o.return)?[4,c.call(o)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})})(t,n).catch(function(t){return n.error(t)})})}function st(t,n,r,e,o){void 0===e&&(e=0),void 0===o&&(o=!1);var i=n.schedule(function(){r(),o?t.add(this.schedule(null,e)):this.unsubscribe()},e);if(t.add(i),!o)return i}function lt(t,n){return void 0===n&&(n=0),z(function(r,e){r.subscribe(C(e,function(r){return st(e,t,function(){return e.next(r)},n)},function(){return st(e,t,function(){return e.complete()},n)},function(r){return st(e,t,function(){return e.error(r)},n)}))})}function at(t,n){return void 0===n&&(n=0),z(function(r,e){e.add(t.schedule(function(){return r.subscribe(e)},n))})}function ft(t,n){if(!t)throw new Error("Iterable cannot be null");return new k(function(r){st(r,n,function(){var e=t[Symbol.asyncIterator]();st(r,n,function(){e.next().then(function(t){t.done?r.complete():r.next(t.value)})},0,!0)})})}function ht(t,n){if(null!=t){if(Z(t))return function(t,n){return ut(t).pipe(at(n),lt(n))}(t,n);if(W(t))return function(t,n){return new k(function(r){var e=0;return n.schedule(function(){e===t.length?r.complete():(r.next(t[e++]),r.closed||this.schedule())})})}(t,n);if(X(t))return function(t,n){return ut(t).pipe(at(n),lt(n))}(t,n);if(tt(t))return ft(t,n);if(et(t))return function(t,n){return new k(function(r){var e;return st(r,n,function(){e=t[rt](),st(r,n,function(){var t,n,o;try{n=(t=e.next()).value,o=t.done}catch(i){return void r.error(i)}o?r.complete():r.next(n)},0,!0)}),function(){return a(null==e?void 0:e.return)&&e.return()}})}(t,n);if(it(t))return function(t,n){return ft(ot(t),n)}(t,n)}throw nt(t)}function pt(t,n){return n?ht(t,n):ut(t)}function dt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return pt(t,V(t))}function vt(t,n){return z(function(r,e){var o=0;r.subscribe(C(e,function(r){e.next(t.call(n,r,o++))}))})}function yt(t,n,r){return void 0===r&&(r=1/0),a(n)?yt(function(r,e){return vt(function(t,o){return n(r,t,e,o)})(ut(t(r,e)))},r):("number"==typeof n&&(r=n),z(function(n,e){return function(t,n,r,e,o,i,u){var c=[],s=0,l=0,a=!1,f=function(){!a||c.length||s||n.complete()},h=function(t){s++;var o=!1;ut(r(t,l++)).subscribe(C(n,function(t){n.next(t)},function(){o=!0},void 0,function(){if(o)try{s--;for(var t=function(){var t=c.shift();u||h(t)};c.length&&s<e;)t();f()}catch(r){n.error(r)}}))};return t.subscribe(C(n,function(t){return s<e?h(t):c.push(t)},function(){a=!0,f()})),function(){}}(n,e,t,r)}))}function bt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=V(t),e=function(t,n){return"number"==typeof Q(t)?t.pop():n}(t,1/0),o=t;return o.length?1===o.length?ut(o[0]):function(t){return void 0===t&&(t=1/0),yt(j,t)}(e)(pt(o,r)):N}function wt(t,n){return z(function(r,e){var o=0;r.subscribe(C(e,function(r){return t.call(n,r,o++)&&e.next(r)}))})}function mt(t){return z(function(n,r){var e,o=null,i=!1;o=n.subscribe(C(r,void 0,void 0,function(u){e=ut(t(u,mt(t)(n))),o?(o.unsubscribe(),o=null,e.subscribe(r)):i=!0})),i&&(o.unsubscribe(),o=null,e.subscribe(r))})}function _t(t,n){return a(n)?yt(t,n,1):yt(t,1)}function xt(t,n){return void 0===n&&(n=H),z(function(r,e){var o=null,i=null,u=null,c=function(){if(o){o.unsubscribe(),o=null;var t=i;i=null,e.next(t)}};function s(){var r=u+t,i=n.now();if(i<r)return o=this.schedule(void 0,r-i),void e.add(o);c()}r.subscribe(C(e,function(r){i=r,u=n.now(),o||(o=n.schedule(s,t),e.add(o))},function(){c(),e.complete()},void 0,function(){i=o=null}))})}function gt(t,n){return z(function(r,e){var o=null,i=0,u=!1,c=function(){return u&&!o&&e.complete()};r.subscribe(C(e,function(r){null==o||o.unsubscribe();var u=0,s=i++;ut(t(r,s)).subscribe(o=C(e,function(t){return e.next(n?n(r,t,s,u++):t)},function(){o=null,c()}))},function(){u=!0,c()}))})}function St(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,e=a(Q(r=t))?r.pop():void 0;return z(function(n,r){for(var o=t.length,c=new Array(o),s=t.map(function(){return!1}),l=!1,a=function(n){ut(t[n]).subscribe(C(r,function(t){c[n]=t,l||s[n]||(s[n]=!0,(l=s.every(j))&&(s=null))},x))},f=0;f<o;f++)a(f);n.subscribe(C(r,function(t){if(l){var n=u([t],i(c));r.next(e?e.apply(void 0,u([],i(n))):n)}}))})}var Et=class extends k{value;__notifier=new q;constructor(t,n){super(t=>{const n=this.__notifier.subscribe(t);return n&&!n.closed&&t.next(this.value),n}),this.value=n,t.subscribe(t=>{t!==this.value&&(this.value=t,this.__notifier.next(t))})}};function It(...t){const n=(...n)=>bt(...t.map(t=>{const r=t(...n);if(!r)throw new TypeError(`combineEpics: one of the provided Epics "${t.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return r}));try{Object.defineProperty(n,"name",{value:`combineEpics(${t.map(t=>t.name||"<anonymous>").join(", ")})`})}catch(r){}return n}function Ot(t={}){const n=new(0,K.constructor)(K.schedulerActionCtor),r=new q;let e;const o=o=>{e=o;const i=new q,u=new q,c=i.asObservable().pipe(lt(n)),s=new Et(u.pipe(lt(n)),e.getState());return r.pipe(vt(n=>{const r=n(c,s,t.dependencies);if(!r)throw new TypeError(`Your root Epic "${n.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return r}),yt(t=>pt(t).pipe(at(n),lt(n)))).subscribe(e.dispatch),t=>n=>{const r=t(n);return u.next(e.getState()),i.next(n),r}};return o.run=t=>{r.next(t)},o}export{It as a,pt as b,mt as c,xt as d,_t as e,wt as f,Ot as g,vt as m,dt as o,gt as s,St as w};
